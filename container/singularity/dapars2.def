Bootstrap: docker
From: gaow/base-notebook:latest


%labels
maintainer = "Liucheng Shi<ls3751@cumc.columbia.edu>"
%post


LC_ALL=C.UTF-8
LANG=C.UTF-8

su -  root # USER root
conda install -y -c bioconda/label/cf201901 bedtools
sudo apt update
sudo apt-get update
# RUN sudo apt upgrade -y --fix-missing
sudo apt-get install -y python2
curl https://bootstrap.pypa.io/pip/2.7/get-pip.py -o get-pip.py
python2 get-pip.py
python2.7 -m pip install numpy
python2.7 -m pip install scipy
R -e "install.packages(c('dplyr', 'tidyr', 'doParallel','VIM','preprocessCore'), dependencies=TRUE, repos='http://cran.rstudio.com/')"
cd /opt
mkdir script && cd script
wget https://raw.githubusercontent.com/cumc/xqtl-pipeline/main/code/gtf2bed12.py \
&& wget https://raw.githubusercontent.com/cumc/xqtl-pipeline/main/code/DaPars_Extract_Anno.py \
&& wget https://raw.githubusercontent.com/cumc/xqtl-pipeline/main/code/Dapars2_Multi_Sample.py
echo "cd /tmp" >> /entrypoint.sh
echo "exec /bin/bash "$@"" >> /entrypoint.sh
chmod u+x /entrypoint.sh
%environment
export LC_ALL=C.UTF-8
export LANG=C.UTF-8
%runscript
exec /bin/bash /bin/bash /entrypoint.sh "$@"
%startscript
exec /bin/bash /bin/bash /entrypoint.sh "$@"
